---
title: "[SQL] 07-2 스토어드 함수와 커서"

categories: 
  - SQL
tags:
  - [SQL, 데이터베이스, DBMS, 공부]

toc: true
toc_sticky: true
---

# 스토어드 프로시저

## 스토어드 함수와 커서

스토어드 함수는 MySQL에서 제공하는 내장 함수 외에 직접 함수를 만드는 기능을 제공한다. <br> 즉, MySQL이 제공하는 함수를 그대로 사용할 수 없는 경우가 발생한다면 직접 스토어드 함수를 작성해서 사용할 수 있다.

스토어드 함수는 스토어드 프로시저와 모양이 비슷하지만, 세부적으로는 다르다. <br> 특히 용도가 다르며, RETURNS 예약어를 통해서 하나의 값을 반환해야 하는 특징을 갖는다.

커서는 스토어드 프로시저 안에서 한 행씩 처리할 때 사용하는 프로그래밍 방식이다.



### 스토어드 함수


#### 스토어드 함수의 개념과 형식

스토어드 함수(stored function)는 다음과 같은 형식으로 구성할 수 있다.

```
DELIMITER $$
CREATE FUNCTION 스토어드_함수_이름(매개변수)
    RETURNS 반환형식
BEGIN

    이 부분에 프로그래밍 코딩
    RETURN 반환값;

END $$
DELIMITER ;
SELECT 스토어드_함수_이름();
```

스토어드 함수와 스토어드 프로시저의 차이점을 살펴보겠다.

- 스토어드 함수는 RETURNS 문으로 반환할 값의 데이터 형식을 지정하고, 본문 안에서는 RETURN 문으로 하나의 값을 반환해야 한다.

- 스토어드 함수의 매개변수는 모두 입력 매개변수이다. <BR> 그리고 IN을 붙이지 않는다.

- 스토어드 프로시저는 CALL로 호출하지만, 스토어드 함수는 SELECT 문 안에서 호출된다.

- 스토어드 프로시저 안에서는 SELECT 문을 사용할 수 있지만, 스토어드 함수 안에서는 SELECT를 사용할 수 없다.

- 스토어드 프로시저는 여러 SQL 문이나 숫자 계산 등의 다양한 용도로 사용하지만, 스토어드 함수는 어떤 계산을 통해서 하나의 값을 반환하는 데 주로 사용한다.


#### 스토어드 함수의 사용




### 커서로 한 행씩 처리하기